"use strict";(self.webpackChunkdocusaurus_osebna=self.webpackChunkdocusaurus_osebna||[]).push([["7305"],{5259:function(e,n,s){s.r(n),s.d(n,{metadata:()=>t,contentTitle:()=>r,default:()=>p,assets:()=>c,toc:()=>d,frontMatter:()=>o});var t=JSON.parse('{"id":"docs-mixed/proxmox-wifi","title":"Proxmox wifi","description":"Wifi on proxmox is slow","source":"@site/docs/docs-mixed/proxmox-wifi.mdx","sourceDirName":"docs-mixed","slug":"/docs-mixed/proxmox-wifi","permalink":"/docs/docs-mixed/proxmox-wifi","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Resizing RHEL/AlmaLinux LVM Disk in Proxmox","permalink":"/docs/docs-mixed/rhel-resize-disk"},"next":{"title":"Ansible","permalink":"/docs/category/ansible"}}'),i=s("5893"),a=s("65");let o={},r="Proxmox wifi",c={},d=[{value:"Wifi on proxmox is slow",id:"wifi-on-proxmox-is-slow",level:3},{value:"On the router setup the destination and gateway",id:"on-the-router-setup-the-destination-and-gateway",level:3},{value:"Install <code>wpasupplicant</code>",id:"install-wpasupplicant",level:3},{value:"Edit <code>/etc/wpa_supplicant/wpa_supplicant.conf</code>",id:"edit-etcwpa_supplicantwpa_supplicantconf",level:3},{value:"Edit <code>/etc/systemd/system/dbus-fi.w1.wpa_supplicant1.service</code>",id:"edit-etcsystemdsystemdbus-fiw1wpa_supplicant1service",level:3},{value:"With working access to Proxmox, create SDN config (Datacenter --&gt; SDN)",id:"with-working-access-to-proxmox-create-sdn-config-datacenter----sdn",level:3},{value:"Configure <code>/etc/network/interfaces</code>",id:"configure-etcnetworkinterfaces",level:2},{value:"Restart networking",id:"restart-networking",level:3}];function l(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"proxmox-wifi",children:"Proxmox wifi"})}),"\n",(0,i.jsx)(n.h3,{id:"wifi-on-proxmox-is-slow",children:"Wifi on proxmox is slow"}),"\n",(0,i.jsx)(n.p,{children:"When I tested this configuration it worked, however the speedes for example on a virtualized TrueNAS where less then half of those on LAN."}),"\n",(0,i.jsx)(n.h3,{id:"on-the-router-setup-the-destination-and-gateway",children:"On the router setup the destination and gateway"}),"\n",(0,i.jsxs)(n.p,{children:["For me I am using Netgear Nighthawk R7000. The settings can be found at ",(0,i.jsx)(n.code,{children:"Advanced"})," \u2794 ",(0,i.jsx)(n.code,{children:"Routing"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Destination:"})," 192.168.3.0 (IPs that will be used by VMs)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Netmask:"})," 255.255.255.0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gateway:"})," 192.168.1.4 (IP of the wifi adapter on proxmox)"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"install-wpasupplicant",children:["Install ",(0,i.jsx)(n.code,{children:"wpasupplicant"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt install wpasupplicant\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"edit-etcwpa_supplicantwpa_supplicantconf",children:["Edit ",(0,i.jsx)(n.code,{children:"/etc/wpa_supplicant/wpa_supplicant.conf"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/wpa_supplicant/wpa_supplicant.conf\n"})}),"\n",(0,i.jsx)(n.p,{children:"Add the following content:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:'network={\n   ssid="wifi"\n   psk="pass"\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"edit-etcsystemdsystemdbus-fiw1wpa_supplicant1service",children:["Edit ",(0,i.jsx)(n.code,{children:"/etc/systemd/system/dbus-fi.w1.wpa_supplicant1.service"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/systemd/system/dbus-fi.w1.wpa_supplicant1.service\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Modify the line (add the config path and add you adapters ID, eg. ",(0,i.jsx)(n.code,{children:"wlp5s0"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ExecStart=/sbin/wpa_supplicant -u -s -c /etc/wpa_supplicant/wpa_supplicant.conf -i wlp5s0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"with-working-access-to-proxmox-create-sdn-config-datacenter----sdn",children:"With working access to Proxmox, create SDN config (Datacenter --\x3e SDN)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Zones:"})," Simple, ID = Zone1 (use any name you like for ID)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vnet:"})," Name = vnet1 (use any name you like for Name), Zone = Zone1 (must match Zone ID)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Subnet:"})," Subnet = 192.168.3.0/24, Gateway = 192.168.3.1"]}),"\n"]}),"\n",(0,i.jsxs)(n.h2,{id:"configure-etcnetworkinterfaces",children:["Configure ",(0,i.jsx)(n.code,{children:"/etc/network/interfaces"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"auto lo\niface lo inet loopback\n\niface enp6s0 inet manual\n\nauto wlp5s0\niface wlp5s0 inet manual\n       address 192.168.1.4/24\n       gateway 192.168.1.1\n       wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf\n\nauto vmbr0\niface vmbr0 inet static\n       address 192.168.2.1/24\n       bridge-ports none\n       bridge-stp off\n       bridge-fd 0\n\n\niface vnet1 inet static\n       address 192.168.3.1/24\n       bridge-ports none\n       bridge-stp off\n       bridge-fd 0\n       post-up echo 1 > /proc/sys/net/ipv4/ip_forward\n       post-up iptables -t nat -A POSTROUTING -s '192.168.3.0/24' -o wlp5s0 -j MASQUERADE\n       post-down iptables -t nat -D POSTROUTING -s '192.168.3.0/24' -o wlp5s0 -j MASQUERADE\n       post-up   iptables -t raw -I PREROUTING -i fwbr+ -j CT --zone1\n       post-down iptables -t raw -D PREROUTING -i fwbr+ -j CT --zone1\n\nsource /etc/network/interfaces.d/*\n"})}),"\n",(0,i.jsx)(n.h3,{id:"restart-networking",children:"Restart networking"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart networking\n"})})]})}function p(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},65:function(e,n,s){s.d(n,{Z:function(){return r},a:function(){return o}});var t=s(7294);let i={},a=t.createContext(i);function o(e){let n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);