"use strict";(self.webpackChunkdocusaurus_osebna=self.webpackChunkdocusaurus_osebna||[]).push([["1975"],{5646:function(e,n,i){i.r(n),i.d(n,{assets:function(){return s},contentTitle:function(){return t},default:function(){return d},frontMatter:function(){return l},metadata:function(){return a},toc:function(){return p}});var a=i(7125),r=i(5893),o=i(65);let l={slug:"nepremicnine-net-playwright",title:"Obvestila za nepremicnine.net s Playwrightom",authors:["rok"],tags:["python","playwright","telegram","gmail","scraping"],comments:!0},t="Ko requests odpove: Playwright bot za nepremicnine.net",s={authorsImageUrls:[void 0]},p=[{value:"Zakaj Playwright namesto <code>requests</code>",id:"zakaj-playwright-namesto-requests",level:2},{value:"Kaj skripta po\u010Dne",id:"kaj-skripta-po\u010Dne",level:2},{value:"Hitri zagon",id:"hitri-zagon",level:2},{value:"Klju\u010Dne nastavitve",id:"klju\u010Dne-nastavitve",level:2},{value:"Samodejno poganjanje",id:"samodejno-poganjanje",level:2},{value:"Opombe iz prakse",id:"opombe-iz-prakse",level:2}];function c(e){let n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Na nepremicnine.net sem posku\u0161al narediti preprost scraper z ",(0,r.jsx)(n.code,{children:"requests"}),", pa je stran hitro vrnila za\u0161\u010Dito/\u010Dudne HTML-je. Zato sem v projektu ",(0,r.jsx)(n.a,{href:"https://github.com/roks531/nepremicnine.net-notify",children:"nepremicnine.net-notify"})," preklopil na ",(0,r.jsx)(n.a,{href:"https://playwright.dev/",children:"Playwright"})," (Firefox), ki stran nalo\u017Ei kot pravi brskalnik in omogo\u010Da zanesljivo pobiranje novih oglasov."]}),"\n",(0,r.jsx)(n.p,{children:"Skripta po\u017Eene ve\u010D iskalnih URL-jev, zbere povezave, preveri katere so nove glede na CSV, ter po\u0161lje obvestila prek Telegrama ali e\u2011po\u0161te (npr. Gmail). Spodaj je kratek vodi\u010D, povzet po README, kako jo pripraviti in pognati."}),"\n",(0,r.jsxs)(n.h2,{id:"zakaj-playwright-namesto-requests",children:["Zakaj Playwright namesto ",(0,r.jsx)(n.code,{children:"requests"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Stran nalaga vsebino dinami\u010Dno in uporablja za\u0161\u010Dite proti botom; klasi\u010Dni HTTP klici vrnejo prazne ali blokirane odgovore."}),"\n",(0,r.jsx)(n.li,{children:"Playwright simulira pravi browser (tu Firefox), zato pride \u010Dez za\u0161\u010Dito in po\u010Daka, da se rezultati dejansko prika\u017Eejo."}),"\n",(0,r.jsx)(n.li,{children:"Dodani so naklju\u010Dni zamiki, timeouti in ponovni poskusi, da scraper ostane stabilen in manj o\u010Diten."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"kaj-skripta-po\u010Dne",children:"Kaj skripta po\u010Dne"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Sprejme ve\u010D ",(0,r.jsx)(n.code,{children:"SEARCH_URLS"})," (npr. razli\u010Dne lokacije ali tipe oglasov)."]}),"\n",(0,r.jsxs)(n.li,{children:["Vsako stran odpre v Playwrightu, \u010Daka na ",(0,r.jsx)(n.code,{children:"networkidle"})," in pobere povezave oglasov."]}),"\n",(0,r.jsxs)(n.li,{children:["Podpira paginacijo (",(0,r.jsx)(n.code,{children:"MAX_PAGES"}),") in ponovne poskuse na timeout."]}),"\n",(0,r.jsxs)(n.li,{children:["Shranjuje vse videne povezave v ",(0,r.jsx)(n.code,{children:"links.csv"}),", da po\u0161ilja samo nove oglase."]}),"\n",(0,r.jsx)(n.li,{children:"Po\u0161ilja obvestila na Telegram in/ali SMTP (Gmail z \u201CApp password\u201D)."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"hitri-zagon",children:"Hitri zagon"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/roks531/nepremicnine.net-notify.git\ncd nepremicnine.net-notify\ncp .env.example .env    # izpolni svoje podatke\n\n# Odvisnosti\nuv sync                 # ali: pip install -r requirements.txt\n\n# Playwright brskalnik (Firefox)\nuv run playwright install firefox   # ali: python -m playwright install firefox\n\n# Pognaj\nuv run python nepremicnine_parse.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Minimalen ",(0,r.jsx)(n.code,{children:".env"})," primer:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"SEARCH_URLS=https://www.nepremicnine.net/oglasi-prodaja/grosuplje/\nLINKS_FILE=links.csv\nMAX_PAGES=5\nSCRAPE_DELAY_MIN=3\nSCRAPE_DELAY_MAX=6\nSCRAPE_TIMEOUT_MS=45000\nSCRAPE_RETRIES=2\n\nTELEGRAM_ENABLED=true\nTELEGRAM_TOKEN=123456:abc\nTELEGRAM_CHAT_ID=123456789\n\nEMAIL_ENABLED=false # true ali false - jaz uporabljam samo telegram, \npreverjeno pa deluje tudi z gmailom\nEMAIL_HOST=smtp.gmail.com\nEMAIL_PORT=587\nEMAIL_USERNAME=tvoj.gmail@gmail.com\nEMAIL_PASSWORD=app-password-iz-google\nEMAIL_FROM=tvoj.gmail@gmail.com\nEMAIL_TO=prejemnik1@gmail.com,prejemnik2@gmail.com\n"})}),"\n",(0,r.jsx)(n.h2,{id:"klju\u010Dne-nastavitve",children:"Klju\u010Dne nastavitve"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"SEARCH_URLS"})}),": URL-ji iskanj, lo\u010Deni z vejico ali novimi vrsticami."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"MAX_PAGES"})}),": koliko strani na posamezen URL se pregleda."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"SCRAPE_DELAY_MIN/MAX"})})," in ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"SCRAPE_RETRIES"})}),": naklju\u010Dni zamik in \u0161tevilo ponovitev ob timeout-u."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"LINKS_FILE"})}),": CSV za sledenje \u017Ee videnim oglasom (pusti v ",(0,r.jsx)(n.code,{children:".gitignore"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Telegram"}),": ",(0,r.jsx)(n.code,{children:"TELEGRAM_ENABLED"}),", ",(0,r.jsx)(n.code,{children:"TELEGRAM_TOKEN"}),", ",(0,r.jsx)(n.code,{children:"TELEGRAM_CHAT_ID"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"E-po\u0161ta"}),": ",(0,r.jsx)(n.code,{children:"EMAIL_ENABLED"})," + ",(0,r.jsx)(n.code,{children:"EMAIL_*"}),"; za Gmail obvezno dvofaktorska prijava in \u201CApp password\u201D."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"samodejno-poganjanje",children:"Samodejno poganjanje"}),"\n",(0,r.jsx)(n.p,{children:"Za redna obvestila dodaj cron (primer vsako uro):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cron",children:"0 * * * * cd /pot/do/nepremicnine.net-notify && /usr/bin/env uv run python nepremicnine_parse.py >> /var/log/nepremicnine.log 2>&1\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Na Windows uporabi Task Scheduler (Start a program \u2192 ",(0,r.jsx)(n.code,{children:"uv.exe"}),"/",(0,r.jsx)(n.code,{children:"python.exe"})," + pot do skripte)."]}),"\n",(0,r.jsx)(n.h2,{id:"opombe-iz-prakse",children:"Opombe iz prakse"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u010Ce se kak\u0161na stran vseeno ustavi, pove\u010Daj ",(0,r.jsx)(n.code,{children:"SCRAPE_TIMEOUT_MS"})," ali ",(0,r.jsx)(n.code,{children:"SCRAPE_RETRIES"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Playwright potrebuje Firefox in osnovne knji\u017Enice (na Ubuntu jih dobi\u0161 z ",(0,r.jsx)(n.code,{children:"apt-get install libnss3 ..."}),", kot pi\u0161e v README)."]}),"\n",(0,r.jsx)(n.li,{children:"Telegram obvestilo ima HTML povezave in izklop predogledov, da ostane pregledno; e\u2011po\u0161ta uporablja navadno besedilo."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"S tem nastavi\u0161 nezahteven, a zanesljiv bot, ki mimo za\u0161\u010Dit nepremicnine.net pobere nove oglase in te pingne tam, kjer ti najbolj ustreza."})]})}function d(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},65:function(e,n,i){i.d(n,{Z:function(){return t},a:function(){return l}});var a=i(7294);let r={},o=a.createContext(r);function l(e){let n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(o.Provider,{value:n},e.children)}},7125:function(e){e.exports=JSON.parse('{"permalink":"/blog/nepremicnine-net-playwright","source":"@site/blog/2025-12-26-nepremicnine-playwright.mdx","title":"Obvestila za nepremicnine.net s Playwrightom","description":"Na nepremicnine.net sem posku\u0161al narediti preprost scraper z requests, pa je stran hitro vrnila za\u0161\u010Dito/\u010Dudne HTML-je. Zato sem v projektu nepremicnine.net-notify preklopil na Playwright (Firefox), ki stran nalo\u017Ei kot pravi brskalnik in omogo\u010Da zanesljivo pobiranje novih oglasov.","date":"2025-12-26T00:00:00.000Z","tags":[{"inline":true,"label":"python","permalink":"/blog/tags/python"},{"inline":true,"label":"playwright","permalink":"/blog/tags/playwright"},{"inline":true,"label":"telegram","permalink":"/blog/tags/telegram"},{"inline":true,"label":"gmail","permalink":"/blog/tags/gmail"},{"inline":true,"label":"scraping","permalink":"/blog/tags/scraping"}],"readingTime":2.26,"hasTruncateMarker":false,"authors":[{"name":"Rok Damjani\u0107","title":"IT, sports, nature","url":"https://linkedin.com/in/rok-damjanic","socials":{"linkedin":"https://www.linkedin.com/in/rok-damjanic/","github":"https://github.com/roks531"},"imageURL":"/img/profile_photo.jpg","key":"rok","page":null}],"frontMatter":{"slug":"nepremicnine-net-playwright","title":"Obvestila za nepremicnine.net s Playwrightom","authors":["rok"],"tags":["python","playwright","telegram","gmail","scraping"],"comments":true},"unlisted":false,"nextItem":{"title":"office365 mail in openforis arena","permalink":"/blog/openforis-arena-mail"}}')}}]);